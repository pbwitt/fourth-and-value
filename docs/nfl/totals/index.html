<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NFL Totals - Fourth & Value</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background: #0f0f0f;
      color: #fff;
      line-height: 1.6;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem 1rem;
    }

    /* Header */
    .header {
      margin-bottom: 2rem;
    }
    h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      color: #4FC3F7;
    }
    .subtitle {
      color: #999;
      margin-bottom: 1rem;
    }

    /* Tabs */
    .tabs {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 2rem;
      border-bottom: 2px solid #2a2a2a;
    }
    .tab {
      padding: 0.75rem 1.5rem;
      background: transparent;
      color: #999;
      text-decoration: none;
      border-bottom: 3px solid transparent;
      transition: all 0.2s;
    }
    .tab:hover {
      color: #fff;
    }
    .tab.active {
      color: #4FC3F7;
      border-bottom-color: #4FC3F7;
    }

    /* Stats summary */
    .stats-summary {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }
    .stat-card {
      background: #1a1a1a;
      padding: 1.5rem;
      border-radius: 8px;
      border: 1px solid #2a2a2a;
    }
    .stat-label {
      font-size: 0.875rem;
      color: #999;
      margin-bottom: 0.5rem;
    }
    .stat-value {
      font-size: 1.75rem;
      font-weight: bold;
      color: #4FC3F7;
    }

    /* Edge plays section */
    .edge-plays {
      background: #1a1a1a;
      border: 2px solid #4FC3F7;
      border-radius: 8px;
      padding: 1.5rem;
      margin-bottom: 2rem;
    }
    .edge-plays h2 {
      color: #4FC3F7;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .edge-plays h2::before {
      content: "ðŸŽ¯";
    }

    /* Game cards */
    .games-grid {
      display: grid;
      gap: 1rem;
    }
    .game-card {
      background: #1a1a1a;
      border: 1px solid #2a2a2a;
      border-radius: 8px;
      padding: 1.5rem;
      transition: border-color 0.2s;
    }
    .game-card:hover {
      border-color: #4FC3F7;
    }
    .game-card.has-edge {
      border: 2px solid #4FC3F7;
      background: linear-gradient(135deg, #1a1a1a 0%, #1a2a3a 100%);
    }

    .game-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid #2a2a2a;
    }
    .matchup {
      font-size: 1.25rem;
      font-weight: bold;
    }

    .totals-row {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 0.75rem;
      margin-bottom: 1rem;
    }
    .total-item {
      background: #2a2a2a;
      padding: 0.75rem;
      border-radius: 4px;
    }
    .total-label {
      font-size: 0.75rem;
      color: #999;
      margin-bottom: 0.25rem;
    }
    .total-value {
      font-size: 1.25rem;
      font-weight: bold;
    }
    .total-value.model {
      color: #4FC3F7;
    }
    .total-value.market {
      color: #FFA726;
    }
    .total-value.edge {
      color: #66BB6A;
    }

    /* Edge plays in card */
    .edge-play-list {
      background: #2a2a2a;
      border-radius: 4px;
      padding: 1rem;
      margin-top: 1rem;
    }
    .edge-play-item {
      padding: 0.75rem;
      background: #1a1a1a;
      border-left: 3px solid #4FC3F7;
      margin-bottom: 0.75rem;
      border-radius: 4px;
    }
    .edge-play-item:last-child {
      margin-bottom: 0;
    }
    .play-bet {
      font-size: 1.125rem;
      font-weight: bold;
      color: #4FC3F7;
      margin-bottom: 0.5rem;
    }
    .play-details {
      font-size: 0.875rem;
      color: #999;
    }

    .no-data {
      text-align: center;
      padding: 3rem;
      color: #999;
    }

    .updated {
      text-align: center;
      color: #666;
      font-size: 0.875rem;
      margin-top: 2rem;
    }

    /* Book lines table */
    .book-lines {
      margin-top: 1rem;
      background: #2a2a2a;
      border-radius: 4px;
      padding: 1rem;
    }
    .book-lines h4 {
      font-size: 0.875rem;
      color: #4FC3F7;
      margin-bottom: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .book-lines-table {
      width: 100%;
      border-collapse: collapse;
    }
    .book-lines-table th {
      text-align: left;
      font-size: 0.75rem;
      color: #999;
      padding: 0.5rem;
      border-bottom: 1px solid #3a3a3a;
    }
    .book-lines-table td {
      padding: 0.5rem;
      font-size: 0.875rem;
      border-bottom: 1px solid #222;
    }
    .book-lines-table tr:last-child td {
      border-bottom: none;
    }
    .book-lines-table tr:hover {
      background: #333;
    }
    .consensus-row {
      background: #1a2a1a !important;
      font-weight: bold;
    }
    .consensus-row td {
      color: #66BB6A;
    }

    /* Search filter */
    .search-container {
      margin-bottom: 1.5rem;
    }
    .search-box {
      width: 100%;
      max-width: 400px;
      padding: 0.75rem 1rem;
      background: #1a1a1a;
      border: 1px solid #2a2a2a;
      border-radius: 8px;
      color: #fff;
      font-size: 1rem;
      transition: border-color 0.2s;
    }
    .search-box:focus {
      outline: none;
      border-color: #4FC3F7;
    }
    .search-box::placeholder {
      color: #666;
    }
  </style>
</head>
<body>
  <div id="nav-root"></div>
  <script src="../../nav.js?v=30"></script>

  <div class="container">
    <div class="header">
      <h1>NFL Totals - Week 11</h1>
      <p class="subtitle">Model predictions vs market consensus â€¢ Find outlier books before lines move</p>
    </div>

    <div class="tabs">
      <a href="../../props/index.html" class="tab">Props</a>
      <a href="../../nfl/totals/index.html" class="tab active">Totals</a>
    </div>

    <div class="search-container">
      <input type="text" id="gameSearch" class="search-box" placeholder="Filter games by team (e.g., KC, BUF, DAL)..." />
    </div>

    <div class="stats-summary">
      <div class="stat-card">
        <div class="stat-label">Games This Week</div>
        <div class="stat-value">14</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Consensus Edges</div>
        <div class="stat-value">0</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Avg Model Total</div>
        <div class="stat-value">46.4</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Avg Market Total</div>
        <div class="stat-value">45.5</div>
      </div>
    </div>

    <div class="games-grid">

      <div class="game-card">
        <div class="game-header">
          <div class="matchup">LV @ DEN</div>
        </div>

        <div class="totals-row">
          <div class="total-item">
            <div class="total-label">Model Prediction</div>
            <div class="total-value model">46.4</div>
          </div>
          <div class="total-item">
            <div class="total-label">DEN</div>
            <div class="total-value">26.1</div>
          </div>
          <div class="total-item">
            <div class="total-label">LV</div>
            <div class="total-value">20.3</div>
          </div>

          <div class="total-item">
            <div class="total-label">Model Spread</div>
            <div class="total-value model">DEN +5.8</div>
          </div>

        </div>

      </div>

      <div class="game-card">
        <div class="game-header">
          <div class="matchup">NO @ CAR</div>
        </div>

        <div class="totals-row">
          <div class="total-item">
            <div class="total-label">Model Prediction</div>
            <div class="total-value model">40.6</div>
          </div>
          <div class="total-item">
            <div class="total-label">CAR</div>
            <div class="total-value">22.5</div>
          </div>
          <div class="total-item">
            <div class="total-label">NO</div>
            <div class="total-value">18.1</div>
          </div>

          <div class="total-item">
            <div class="total-label">Model Spread</div>
            <div class="total-value model">CAR +4.4</div>
          </div>

        </div>

      </div>

      <div class="game-card">
        <div class="game-header">
          <div class="matchup">NYG @ CHI</div>
        </div>

        <div class="totals-row">
          <div class="total-item">
            <div class="total-label">Model Prediction</div>
            <div class="total-value model">40.6</div>
          </div>
          <div class="total-item">
            <div class="total-label">CHI</div>
            <div class="total-value">21.1</div>
          </div>
          <div class="total-item">
            <div class="total-label">NYG</div>
            <div class="total-value">19.4</div>
          </div>

          <div class="total-item">
            <div class="total-label">Model Spread</div>
            <div class="total-value model">CHI +1.7</div>
          </div>

        </div>

      </div>

      <div class="game-card">
        <div class="game-header">
          <div class="matchup">JAX @ HOU</div>
        </div>

        <div class="totals-row">
          <div class="total-item">
            <div class="total-label">Model Prediction</div>
            <div class="total-value model">45.0</div>
          </div>
          <div class="total-item">
            <div class="total-label">HOU</div>
            <div class="total-value">23.0</div>
          </div>
          <div class="total-item">
            <div class="total-label">JAX</div>
            <div class="total-value">22.0</div>
          </div>

          <div class="total-item">
            <div class="total-label">Model Spread</div>
            <div class="total-value model">HOU +0.9</div>
          </div>

        </div>

      </div>

      <div class="game-card">
        <div class="game-header">
          <div class="matchup">ATL @ IND</div>
        </div>

        <div class="totals-row">
          <div class="total-item">
            <div class="total-label">Model Prediction</div>
            <div class="total-value model">44.5</div>
          </div>
          <div class="total-item">
            <div class="total-label">IND</div>
            <div class="total-value">22.7</div>
          </div>
          <div class="total-item">
            <div class="total-label">ATL</div>
            <div class="total-value">21.7</div>
          </div>

          <div class="total-item">
            <div class="total-label">Model Spread</div>
            <div class="total-value model">IND +1.0</div>
          </div>

        </div>

      </div>

      <div class="game-card">
        <div class="game-header">
          <div class="matchup">PIT @ LAC</div>
        </div>

        <div class="totals-row">
          <div class="total-item">
            <div class="total-label">Model Prediction</div>
            <div class="total-value model">45.6</div>
          </div>
          <div class="total-item">
            <div class="total-label">LAC</div>
            <div class="total-value">26.7</div>
          </div>
          <div class="total-item">
            <div class="total-label">PIT</div>
            <div class="total-value">18.9</div>
          </div>

          <div class="total-item">
            <div class="total-label">Model Spread</div>
            <div class="total-value model">LAC +7.8</div>
          </div>

        </div>

      </div>

      <div class="game-card">
        <div class="game-header">
          <div class="matchup">BUF @ MIA</div>
        </div>

        <div class="totals-row">
          <div class="total-item">
            <div class="total-label">Model Prediction</div>
            <div class="total-value model">49.3</div>
          </div>
          <div class="total-item">
            <div class="total-label">MIA</div>
            <div class="total-value">24.7</div>
          </div>
          <div class="total-item">
            <div class="total-label">BUF</div>
            <div class="total-value">24.6</div>
          </div>

          <div class="total-item">
            <div class="total-label">Model Spread</div>
            <div class="total-value model">MIA +0.1</div>
          </div>

        </div>

      </div>

      <div class="game-card">
        <div class="game-header">
          <div class="matchup">BAL @ MIN</div>
        </div>

        <div class="totals-row">
          <div class="total-item">
            <div class="total-label">Model Prediction</div>
            <div class="total-value model">53.6</div>
          </div>
          <div class="total-item">
            <div class="total-label">MIN</div>
            <div class="total-value">25.5</div>
          </div>
          <div class="total-item">
            <div class="total-label">BAL</div>
            <div class="total-value">28.1</div>
          </div>

          <div class="total-item">
            <div class="total-label">Model Spread</div>
            <div class="total-value model">MIN -2.6</div>
          </div>

        </div>

      </div>

      <div class="game-card">
        <div class="game-header">
          <div class="matchup">CLE @ NYJ</div>
        </div>

        <div class="totals-row">
          <div class="total-item">
            <div class="total-label">Model Prediction</div>
            <div class="total-value model">39.2</div>
          </div>
          <div class="total-item">
            <div class="total-label">NYJ</div>
            <div class="total-value">22.9</div>
          </div>
          <div class="total-item">
            <div class="total-label">CLE</div>
            <div class="total-value">16.4</div>
          </div>

          <div class="total-item">
            <div class="total-label">Model Spread</div>
            <div class="total-value model">NYJ +6.5</div>
          </div>

        </div>

      </div>

      <div class="game-card">
        <div class="game-header">
          <div class="matchup">ARI @ SEA</div>
        </div>

        <div class="totals-row">
          <div class="total-item">
            <div class="total-label">Model Prediction</div>
            <div class="total-value model">45.6</div>
          </div>
          <div class="total-item">
            <div class="total-label">SEA</div>
            <div class="total-value">23.3</div>
          </div>
          <div class="total-item">
            <div class="total-label">ARI</div>
            <div class="total-value">22.3</div>
          </div>

          <div class="total-item">
            <div class="total-label">Model Spread</div>
            <div class="total-value model">SEA +1.1</div>
          </div>

        </div>

      </div>

      <div class="game-card">
        <div class="game-header">
          <div class="matchup">LA @ SF</div>
        </div>

        <div class="totals-row">
          <div class="total-item">
            <div class="total-label">Model Prediction</div>
            <div class="total-value model">46.7</div>
          </div>
          <div class="total-item">
            <div class="total-label">SF</div>
            <div class="total-value">24.0</div>
          </div>
          <div class="total-item">
            <div class="total-label">LA</div>
            <div class="total-value">22.7</div>
          </div>

          <div class="total-item">
            <div class="total-label">Model Spread</div>
            <div class="total-value model">SF +1.3</div>
          </div>

        </div>

      </div>

      <div class="game-card">
        <div class="game-header">
          <div class="matchup">NE @ TB</div>
        </div>

        <div class="totals-row">
          <div class="total-item">
            <div class="total-label">Model Prediction</div>
            <div class="total-value model">47.8</div>
          </div>
          <div class="total-item">
            <div class="total-label">TB</div>
            <div class="total-value">28.6</div>
          </div>
          <div class="total-item">
            <div class="total-label">NE</div>
            <div class="total-value">19.2</div>
          </div>

          <div class="total-item">
            <div class="total-label">Model Spread</div>
            <div class="total-value model">TB +9.4</div>
          </div>

        </div>

      </div>

      <div class="game-card">
        <div class="game-header">
          <div class="matchup">DET @ WAS</div>
        </div>

        <div class="totals-row">
          <div class="total-item">
            <div class="total-label">Model Prediction</div>
            <div class="total-value model">52.4</div>
          </div>
          <div class="total-item">
            <div class="total-label">WAS</div>
            <div class="total-value">26.8</div>
          </div>
          <div class="total-item">
            <div class="total-label">DET</div>
            <div class="total-value">25.6</div>
          </div>

          <div class="total-item">
            <div class="total-label">Model Spread</div>
            <div class="total-value model">WAS +1.2</div>
          </div>

        </div>

      </div>

      <div class="game-card">
        <div class="game-header">
          <div class="matchup">PHI @ GB</div>
        </div>

        <div class="totals-row">
          <div class="total-item">
            <div class="total-label">Model Prediction</div>
            <div class="total-value model">52.1</div>
          </div>
          <div class="total-item">
            <div class="total-label">GB</div>
            <div class="total-value">25.9</div>
          </div>
          <div class="total-item">
            <div class="total-label">PHI</div>
            <div class="total-value">26.2</div>
          </div>

          <div class="total-item">
            <div class="total-label">Market Total</div>
            <div class="total-value market">45.5</div>
          </div>

          <div class="total-item">
            <div class="total-label">Model Spread</div>
            <div class="total-value model">GB -0.2</div>
          </div>

          <div class="total-item">
            <div class="total-label">Market Spread</div>
            <div class="total-value market">GB -1.0</div>
          </div>

          <div class="total-item">
            <div class="total-label">Model Edge</div>
            <div class="total-value edge">+6.6</div>
          </div>

        </div>

        <div class="book-lines">
          <h4>ðŸ“Š All Book Lines</h4>
          <table class="book-lines-table">
            <thead>
              <tr>
                <th>Book</th>
                <th>Total</th>
                <th>Over</th>
                <th>Under</th>
                <th>Spread</th>
                <th>Fav</th>
                <th>Dog</th>
              </tr>
            </thead>
            <tbody>

              <tr class="consensus-row">
                <td><strong>CONSENSUS</strong></td>
                <td>45.5</td>
                <td>-</td>
                <td>-</td>
                <td>GB -1.0</td>
                <td>-</td>
                <td>-</td>
              </tr>

              <tr>
                <td>draftkings</td>
                <td>45.5</td>
                <td>-112</td>
                <td>-108</td>
                <td>GB -1.5</td>
                <td>+100</td>
                <td>-120</td>
              </tr>

              <tr>
                <td>mybookieag</td>
                <td>45.5</td>
                <td>-110</td>
                <td>-110</td>
                <td>GB -1.0</td>
                <td>-110</td>
                <td>-110</td>
              </tr>

              <tr>
                <td>betus</td>
                <td>45.5</td>
                <td>-110</td>
                <td>-110</td>
                <td>GB -1.0</td>
                <td>-110</td>
                <td>-110</td>
              </tr>

              <tr>
                <td>williamhill_us</td>
                <td>45.5</td>
                <td>-110</td>
                <td>-110</td>
                <td>GB -1.0</td>
                <td>-110</td>
                <td>-110</td>
              </tr>

              <tr>
                <td>bovada</td>
                <td>45.5</td>
                <td>-115</td>
                <td>-105</td>
                <td>GB -1.0</td>
                <td>-105</td>
                <td>-115</td>
              </tr>

              <tr>
                <td>fanduel</td>
                <td>45.5</td>
                <td>-110</td>
                <td>-110</td>
                <td>GB -1.5</td>
                <td>-104</td>
                <td>-118</td>
              </tr>

              <tr>
                <td>lowvig</td>
                <td>45.5</td>
                <td>-107</td>
                <td>-107</td>
                <td>GB -1.0</td>
                <td>-105</td>
                <td>-105</td>
              </tr>

              <tr>
                <td>betonlineag</td>
                <td>45.5</td>
                <td>-110</td>
                <td>-110</td>
                <td>GB -1.0</td>
                <td>-110</td>
                <td>-110</td>
              </tr>

              <tr>
                <td>betrivers</td>
                <td>45.0</td>
                <td>-113</td>
                <td>-113</td>
                <td>GB +0.0</td>
                <td>-113</td>
                <td>-113</td>
              </tr>

              <tr>
                <td>betmgm</td>
                <td>45.5</td>
                <td>-110</td>
                <td>-110</td>
                <td>GB -1.0</td>
                <td>-110</td>
                <td>-110</td>
              </tr>

              <tr>
                <td>fanatics</td>
                <td>45.5</td>
                <td>-110</td>
                <td>-110</td>
                <td>GB -0.5</td>
                <td>-110</td>
                <td>-110</td>
              </tr>

            </tbody>
          </table>
        </div>

      </div>

    </div>

    <div class="updated">
      Last updated: 2025-11-10 10:04 AM ET
    </div>
  </div>

  <script src="../../tracking/github-api.js"></script>
  <script>
  // Add Track buttons to NFL totals page
  document.addEventListener('DOMContentLoaded', function() {
    const isAuthenticated = sessionStorage.getItem('betTrackingAuth') === 'true';

    if (!isAuthenticated) return;

    // Find all book lines tables
    const tables = document.querySelectorAll('.book-lines-table');

    tables.forEach(table => {
      // Add Track header
      const headerRow = table.querySelector('thead tr');
      if (headerRow && !headerRow.querySelector('.track-header')) {
        const th = document.createElement('th');
        th.className = 'track-header';
        th.textContent = 'Track';
        headerRow.appendChild(th);
      }

      // Find parent game card to get team info
      const gameCard = table.closest('.game-card');
      if (!gameCard) return;

      const matchup = gameCard.querySelector('.matchup')?.textContent || '';
      const [awayTeam, homeTeam] = matchup.split(' @ ').map(s => s.trim());

      // Add Track buttons to each book line row (skip consensus row)
      const rows = table.querySelectorAll('tbody tr:not(.consensus-row)');
      rows.forEach(row => {
        if (row.querySelector('.track-cell')) return; // Already added

        const cells = row.querySelectorAll('td');
        if (cells.length < 7) return;

        const book = cells[0].textContent.trim();
        const totalLine = parseFloat(cells[1].textContent) || 0;
        const overPrice = cells[2].textContent.trim();
        const underPrice = cells[3].textContent.trim();

        // Create track cell with O/U buttons
        const trackCell = document.createElement('td');
        trackCell.className = 'track-cell';
        trackCell.style.cssText = 'display:flex; gap:0.25rem;';

        // Over button
        const overBtn = document.createElement('button');
        overBtn.textContent = 'O';
        overBtn.style.cssText = 'padding:0.3rem 0.5rem;background:#4FC3F7;color:#000;border:none;border-radius:3px;font-size:0.7rem;font-weight:600;cursor:pointer;';
        overBtn.onclick = () => window.trackNFLTotal(homeTeam, awayTeam, book, totalLine, overPrice, 'over');

        // Under button
        const underBtn = document.createElement('button');
        underBtn.textContent = 'U';
        underBtn.style.cssText = 'padding:0.3rem 0.5rem;background:#4FC3F7;color:#000;border:none;border-radius:3px;font-size:0.7rem;font-weight:600;cursor:pointer;';
        underBtn.onclick = () => window.trackNFLTotal(homeTeam, awayTeam, book, totalLine, underPrice, 'under');

        trackCell.appendChild(overBtn);
        trackCell.appendChild(underBtn);
        row.appendChild(trackCell);
      });
    });
  });

  // Track NFL Team Total function
  window.trackNFLTotal = function(homeTeam, awayTeam, book, line, odds, side) {
    const stake = prompt('Enter stake amount ($):', '100');
    if (!stake || isNaN(parseFloat(stake))) {
      alert('Invalid stake amount');
      return;
    }

    // Parse odds (remove + or -)
    const oddsNum = parseInt(odds.replace('+', '').replace('-', ''));
    const oddsStr = odds.includes('-') ? `-${oddsNum}` : oddsNum.toString();

    const today = new Date().toISOString().split('T')[0];

    const bet = {
      bet_id: 'bet_' + Date.now(),
      timestamp: new Date().toISOString(),
      league: 'NFL',
      game_date: today,
      team_home: homeTeam,
      team_away: awayTeam,
      player: '',
      market_type: 'team_total',
      side: side,
      line: line,
      book: book,
      odds: oddsStr,
      stake_dollars: parseFloat(stake).toFixed(2),
      status: 'pending',
      actual_result: '',
      payout: '',
      graded_timestamp: '',
      model_prob: '',
      edge_bps: ''
    };

    // Auto-track bet via GitHub API
    if (window.autoTrackBet) {
      autoTrackBet(bet);
    } else {
      alert('Error: Auto-tracking unavailable. Please refresh the page and try again.');
    }
  };
  </script>

  <script>
    // Game search filter
    const searchBox = document.getElementById('gameSearch');
    const gameCards = document.querySelectorAll('.game-card');

    searchBox.addEventListener('input', (e) => {
      const searchTerm = e.target.value.toLowerCase().trim();

      gameCards.forEach(card => {
        const matchup = card.querySelector('.matchup').textContent.toLowerCase();

        if (searchTerm === '' || matchup.includes(searchTerm)) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    });
  </script>
</body>
</html>
