<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Fourth & Value — Consensus (Week 6, 2025)</title>
<!-- preserved page-specific styles/links -->
</head>
<body>
  <div id="nav-root"></div>
  <script src="../nav.js?v=25"></script>
  
<style>
:root {
  --bg:#0b0b10;
  --card:#14141c;
  --muted:#9aa0a6;
  --text:#e8eaed;
  --border:#23232e;
}

body {
  margin: 0;
  padding: 24px;
  background: var(--bg);
  color: var(--text);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
}

.small {
  color: var(--muted);
  font-size: 12px;
}

.card {
  background: linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,0));
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 16px;
  margin-bottom: 16px;
  box-shadow: 0 0 0 1px rgba(255,255,255,.02), 0 12px 40px rgba(0,0,0,.35);
}

.fv-filter-bar {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items: center;
  margin: 0 0 16px 0;
}

.fv-filter-bar label {
  font-size: 14px;
  display: inline-flex;
  flex-direction: column;
  gap: 4px;
  color: var(--muted);
}

.fv-filter-bar select, .fv-filter-bar input {
  background: var(--card);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 8px 10px;
  min-width: 110px;
  outline: none;
}

.fv-filter-bar select:focus, .fv-filter-bar input:focus {
  border-color: #6ee7ff;
  box-shadow: 0 0 0 3px rgba(110,231,255,.15);
}

.table-wrap {
  overflow: auto;
  border: 1px solid var(--border);
  border-radius: 14px;
}

table.consensus-table {
  border-collapse: collapse;
  width: 100%;
  min-width: 1000px;
  background: var(--card);
  color: var(--text);
}

table.consensus-table th,
table.consensus-table td {
  padding: 10px 12px;
  border-bottom: 1px solid var(--border);
}

table.consensus-table th {
  text-align: left;
  position: sticky;
  top: 0;
  background: var(--card);
  z-index: 1;
  font-size: 12px;
  color: var(--muted);
  letter-spacing: .2px;
  font-weight: 600;
}

table.consensus-table td {
  text-align: left;
}

table.consensus-table td.right {
  text-align: right !important;
  font-variant-numeric: tabular-nums;
}

table.consensus-table tr:hover td {
  background: rgba(255,255,255,.02);
}

table.consensus-table .edge-strong td {
  font-weight: 600;
}

table.consensus-table a {
  color: inherit;
  text-decoration: none;
}

.checkbox-dropdown {
  position: relative;
  min-width: 180px;
}

.checkbox-dropdown-button {
  width: 100%;
  background: var(--card);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 8px 10px;
  outline: none;
  cursor: pointer;
  text-align: left;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 14px;
}

.checkbox-dropdown-button:hover {
  border-color: #6ee7ff;
  box-shadow: 0 0 0 3px rgba(110,231,255,.15);
}

.checkbox-dropdown-button::after {
  content: '▼';
  font-size: 10px;
  opacity: 0.6;
}

.checkbox-dropdown.open .checkbox-dropdown-button::after {
  content: '▲';
}

.checkbox-group {
  display: none;
  position: absolute;
  z-index: 1000;
  flex-direction: column;
  gap: 6px;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 10px;
  max-height: 250px;
  overflow-y: auto;
  min-width: 100%;
  margin-top: 4px;
  box-shadow: 0 4px 12px rgba(0,0,0,.3);
}

.checkbox-dropdown.open .checkbox-group {
  display: flex;
}

.checkbox-item {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  padding: 4px 6px;
  border-radius: 6px;
  transition: background 0.15s;
}

.checkbox-item:hover {
  background: rgba(255,255,255,.05);
}

.checkbox-item input[type="checkbox"] {
  width: 16px;
  height: 16px;
  cursor: pointer;
  accent-color: #34d399;
}

.checkbox-item label {
  cursor: pointer;
  flex: 1;
  font-size: 13px;
  color: var(--text);
  margin: 0;
  white-space: nowrap;
}

</style>


<div class="card">
<h1 style="margin:0 0 12px;font-size:22px;font-weight:700;letter-spacing:.2px;color:#fff;">Week 6, 2025</h1>
<div class="small" style="margin-bottom:16px;">Select Game → Market → Player filters below. <strong>My Books</strong>: Select only the books you have access to. Consensus line = median across books; Market % = de-vigged consensus probability. <strong>Fair Odds</strong> = de-vigged book price (~5% vig removed). <strong>Edge</strong> = Model % − Market % (basis points).</div>

<div class="fv-filter-bar" id="fv-filter-bar">
  <label>Game <select id="filter-game"><option value="">All</option></select></label>
  <label>Market <select id="filter-market"><option value="">All</option></select></label>
  <label>Player <input type="text" id="filter-player" placeholder="Search player" /></label>
  <label>My Books
    <div id="bookDropdown" class="checkbox-dropdown">
      <button type="button" id="bookButton" class="checkbox-dropdown-button">
        <span id="bookButtonText">Book (All)</span>
      </button>
      <div id="filter-books" class="checkbox-group"></div>
    </div>
  </label>
</div>

<div style="margin:8px 0 16px 0;font-size:12px;color:#9aa0a6;">
  <button id="select-all-books" style="padding:6px 12px;margin-right:8px;cursor:pointer;background:#2a2a35;color:#e8eaed;border:1px solid #23232e;border-radius:6px;font-size:12px;">Select All Books</button>
  <button id="clear-books" style="padding:6px 12px;cursor:pointer;background:#2a2a35;color:#e8eaed;border:1px solid #23232e;border-radius:6px;font-size:12px;">Clear All Books</button>
  <span id="book-count" style="margin-left:12px;"></span>
</div>

</div>

<div class="card table-wrap">
<table id="props-table" class="consensus-table props-table"><thead><tr><th>Game</th><th>Player</th><th>Market</th><th>Side</th><th>Model Line</th><th>Book Line</th><th>Market Cons. Line</th><th>Book / Price</th><th>Model %</th><th>Market %</th><th>Edge (bps)</th><th>Fair Odds</th></tr></thead><tbody><tr data-game="tennessee titans @ las vegas raiders" data-market="pass_yds" data-book="betmgm" data-player="cam ward" class="edge-strong"><td class="game">Tennessee Titans @ Las Vegas Raiders</td><td class="player">Cam Ward</td><td class="market">player_pass_yds</td><td class="side">Under</td><td class="model-line right">152.6</td><td class="book-line right">189.5</td><td class="cons-line right">155.5</td><td class="price">BetMGM (-115)</td><td class="model-pct right">90.3%</td><td class="mkt-pct right">50.0%</td><td class="edge right">+3685</td><td class="fair-odds right">-104</td></tr>
<tr data-game="detroit lions @ kansas city chiefs" data-market="anytime_td" data-book="fanatics" data-player="amon-ra st. brown" class="edge-strong"><td class="game">Detroit Lions @ Kansas City Chiefs</td><td class="player">Amon-Ra St. Brown</td><td class="market">player_anytime_td</td><td class="side">Yes</td><td class="model-line right">1.5</td><td class="book-line right">—</td><td class="cons-line right">—</td><td class="price">Fanatics (+105)</td><td class="model-pct right">77.7%</td><td class="mkt-pct right">27.0%</td><td class="edge right">+2890</td><td class="fair-odds right">+115</td></tr>
<tr data-game="los angeles chargers @ miami dolphins" data-market="anytime_td" data-book="fanatics" data-player="quentin johnston" class="edge-strong"><td class="game">Los Angeles Chargers @ Miami Dolphins</td><td class="player">Quentin Johnston</td><td class="market">player_anytime_td</td><td class="side">Yes</td><td class="model-line right">1</td><td class="book-line right">—</td><td class="cons-line right">—</td><td class="price">Fanatics (+170)</td><td class="model-pct right">63.2%</td><td class="mkt-pct right">23.8%</td><td class="edge right">+2617</td><td class="fair-odds right">+183</td></tr>
<tr data-game="new england patriots @ new orleans saints" data-market="anytime_td" data-book="fanatics" data-player="mack hollins" class="edge-strong"><td class="game">New England Patriots @ New Orleans Saints</td><td class="player">Mack Hollins</td><td class="market">player_anytime_td</td><td class="side">Yes</td><td class="model-line right">0.5</td><td class="book-line right">—</td><td class="cons-line right">—</td><td class="price">Fanatics (+550)</td><td class="model-pct right">39.3%</td><td class="mkt-pct right">13.3%</td><td class="edge right">+2396</td><td class="fair-odds right">+582</td></tr>
<tr data-game="new england patriots @ new orleans saints" data-market="anytime_td" data-book="fanatics" data-player="hunter henry" class="edge-strong"><td class="game">New England Patriots @ New Orleans Saints</td><td class="player">Hunter Henry</td><td class="market">player_anytime_td</td><td class="side">Yes</td><td class="model-line right">0.8</td><td class="book-line right">—</td><td class="cons-line right">—</td><td class="price">Fanatics (+170)</td><td class="model-pct right">52.8%</td><td class="mkt-pct right">30.8%</td><td class="edge right">+1572</td><td class="fair-odds right">+183</td></tr>
<tr data-game="buffalo bills @ atlanta falcons" data-market="anytime_td" data-book="fanatics" data-player="dalton kincaid"><td class="game">Buffalo Bills @ Atlanta Falcons</td><td class="player">Dalton Kincaid</td><td class="market">player_anytime_td</td><td class="side">Yes</td><td class="model-line right">0.8</td><td class="book-line right">—</td><td class="cons-line right">—</td><td class="price">Fanatics (+145)</td><td class="model-pct right">52.8%</td><td class="mkt-pct right">30.1%</td><td class="edge right">+1194</td><td class="fair-odds right">+157</td></tr>
<tr data-game="new england patriots @ new orleans saints" data-market="anytime_td" data-book="fanatics" data-player="demario douglas"><td class="game">New England Patriots @ New Orleans Saints</td><td class="player">DeMario Douglas</td><td class="market">player_anytime_td</td><td class="side">Yes</td><td class="model-line right">0.3</td><td class="book-line right">—</td><td class="cons-line right">—</td><td class="price">Fanatics (+500)</td><td class="model-pct right">28.3%</td><td class="mkt-pct right">11.1%</td><td class="edge right">+1168</td><td class="fair-odds right">+530</td></tr>
<tr data-game="buffalo bills @ atlanta falcons" data-market="anytime_td" data-book="draftkings" data-player="james cook"><td class="game">Buffalo Bills @ Atlanta Falcons</td><td class="player">James Cook</td><td class="market">player_anytime_td</td><td class="side">Yes</td><td class="model-line right">1.2</td><td class="book-line right">—</td><td class="cons-line right">—</td><td class="price">DraftKings (-150)</td><td class="model-pct right">71.3%</td><td class="mkt-pct right">66.7%</td><td class="edge right">+1134</td><td class="fair-odds right">-133</td></tr>
<tr data-game="chicago bears @ washington commanders" data-market="anytime_td" data-book="fanatics" data-player="deebo samuel sr."><td class="game">Chicago Bears @ Washington Commanders</td><td class="player">Deebo Samuel Sr.</td><td class="market">player_anytime_td</td><td class="side">Yes</td><td class="model-line right">0.8</td><td class="book-line right">—</td><td class="cons-line right">—</td><td class="price">Fanatics (+140)</td><td class="model-pct right">52.8%</td><td class="mkt-pct right">27.8%</td><td class="edge right">+1109</td><td class="fair-odds right">+152</td></tr>
<tr data-game="detroit lions @ kansas city chiefs" data-market="anytime_td" data-book="fanatics" data-player="jahmyr gibbs"><td class="game">Detroit Lions @ Kansas City Chiefs</td><td class="player">Jahmyr Gibbs</td><td class="market">player_anytime_td</td><td class="side">Yes</td><td class="model-line right">1</td><td class="book-line right">—</td><td class="cons-line right">—</td><td class="price">Fanatics (-120)</td><td class="model-pct right">63.2%</td><td class="mkt-pct right">45.7%</td><td class="edge right">+866</td><td class="fair-odds right">-108</td></tr>
<tr data-game="cincinnati bengals @ green bay packers" data-market="anytime_td" data-book="fanatics" data-player="cincinnati bengals d/st"><td class="game">Cincinnati Bengals @ Green Bay Packers</td><td class="player">Cincinnati Bengals D/ST</td><td class="market">player_anytime_td</td><td class="side">Yes</td><td class="model-line right">0.2</td><td class="book-line right">—</td><td class="cons-line right">—</td><td class="price">Fanatics (+550)</td><td class="model-pct right">22.1%</td><td class="mkt-pct right">6.9%</td><td class="edge right">+673</td><td class="fair-odds right">+582</td></tr>
<tr data-game="arizona cardinals @ indianapolis colts" data-market="anytime_td" data-book="fanatics" data-player="arizona cardinals d/st"><td class="game">Arizona Cardinals @ Indianapolis Colts</td><td class="player">Arizona Cardinals D/ST</td><td class="market">player_anytime_td</td><td class="side">Yes</td><td class="model-line right">0.2</td><td class="book-line right">—</td><td class="cons-line right">—</td><td class="price">Fanatics (+530)</td><td class="model-pct right">22.1%</td><td class="mkt-pct right">9.8%</td><td class="edge right">+624</td><td class="fair-odds right">+561</td></tr>
<tr data-game="tennessee titans @ las vegas raiders" data-market="anytime_td" data-book="fanatics" data-player="tennessee titans d/st"><td class="game">Tennessee Titans @ Las Vegas Raiders</td><td class="player">Tennessee Titans D/ST</td><td class="market">player_anytime_td</td><td class="side">Yes</td><td class="model-line right">0.2</td><td class="book-line right">—</td><td class="cons-line right">—</td><td class="price">Fanatics (+500)</td><td class="model-pct right">22.1%</td><td class="mkt-pct right">7.0%</td><td class="edge right">+545</td><td class="fair-odds right">+530</td></tr>
<tr data-game="detroit lions @ kansas city chiefs" data-market="anytime_td" data-book="fanatics" data-player="detroit lions d/st"><td class="game">Detroit Lions @ Kansas City Chiefs</td><td class="player">Detroit Lions D/ST</td><td class="market">player_anytime_td</td><td class="side">Yes</td><td class="model-line right">0.2</td><td class="book-line right">—</td><td class="cons-line right">—</td><td class="price">Fanatics (+500)</td><td class="model-pct right">22.1%</td><td class="mkt-pct right">11.1%</td><td class="edge right">+545</td><td class="fair-odds right">+530</td></tr>
<tr data-game="new england patriots @ new orleans saints" data-market="anytime_td" data-book="fanatics" data-player="new england patriots d/st"><td class="game">New England Patriots @ New Orleans Saints</td><td class="player">New England Patriots D/ST</td><td class="market">player_anytime_td</td><td class="side">Yes</td><td class="model-line right">0.2</td><td class="book-line right">—</td><td class="cons-line right">—</td><td class="price">Fanatics (+500)</td><td class="model-pct right">22.1%</td><td class="mkt-pct right">14.3%</td><td class="edge right">+545</td><td class="fair-odds right">+530</td></tr>
<tr data-game="buffalo bills @ atlanta falcons" data-market="anytime_td" data-book="fanatics" data-player="buffalo bills d/st"><td class="game">Buffalo Bills @ Atlanta Falcons</td><td class="player">Buffalo Bills D/ST</td><td class="market">player_anytime_td</td><td class="side">Yes</td><td class="model-line right">0.2</td><td class="book-line right">—</td><td class="cons-line right">—</td><td class="price">Fanatics (+470)</td><td class="model-pct right">22.1%</td><td class="mkt-pct right">16.7%</td><td class="edge right">+457</td><td class="fair-odds right">+498</td></tr>
<tr data-game="los angeles chargers @ miami dolphins" data-market="anytime_td" data-book="fanatics" data-player="los angeles chargers d/st"><td class="game">Los Angeles Chargers @ Miami Dolphins</td><td class="player">Los Angeles Chargers D/ST</td><td class="market">player_anytime_td</td><td class="side">Yes</td><td class="model-line right">0.2</td><td class="book-line right">—</td><td class="cons-line right">—</td><td class="price">Fanatics (+470)</td><td class="model-pct right">22.1%</td><td class="mkt-pct right">9.4%</td><td class="edge right">+457</td><td class="fair-odds right">+498</td></tr>
<tr data-game="buffalo bills @ atlanta falcons" data-market="anytime_td" data-book="fanatics" data-player="elijah moore"><td class="game">Buffalo Bills @ Atlanta Falcons</td><td class="player">Elijah Moore</td><td class="market">player_anytime_td</td><td class="side">Yes</td><td class="model-line right">0.2</td><td class="book-line right">—</td><td class="cons-line right">—</td><td class="price">Fanatics (+470)</td><td class="model-pct right">22.1%</td><td class="mkt-pct right">8.7%</td><td class="edge right">+457</td><td class="fair-odds right">+498</td></tr>
<tr data-game="detroit lions @ kansas city chiefs" data-market="anytime_td" data-book="fanatics" data-player="kansas city chiefs d/st"><td class="game">Detroit Lions @ Kansas City Chiefs</td><td class="player">Kansas City Chiefs D/ST</td><td class="market">player_anytime_td</td><td class="side">Yes</td><td class="model-line right">0.2</td><td class="book-line right">—</td><td class="cons-line right">—</td><td class="price">Fanatics (+470)</td><td class="model-pct right">22.1%</td><td class="mkt-pct right">14.3%</td><td class="edge right">+457</td><td class="fair-odds right">+498</td></tr>
<tr data-game="chicago bears @ washington commanders" data-market="anytime_td" data-book="fanatics" data-player="washington commanders d/st"><td class="game">Chicago Bears @ Washington Commanders</td><td class="player">Washington Commanders D/ST</td><td class="market">player_anytime_td</td><td class="side">Yes</td><td class="model-line right">0.2</td><td class="book-line right">—</td><td class="cons-line right">—</td><td class="price">Fanatics (+470)</td><td class="model-pct right">22.1%</td><td class="mkt-pct right">8.8%</td><td class="edge right">+457</td><td class="fair-odds right">+498</td></tr>
<tr data-game="arizona cardinals @ indianapolis colts" data-market="anytime_td" data-book="fanatics" data-player="marvin harrison jr."><td class="game">Arizona Cardinals @ Indianapolis Colts</td><td class="player">Marvin Harrison Jr.</td><td class="market">player_anytime_td</td><td class="side">Yes</td><td class="model-line right">0.5</td><td class="book-line right">—</td><td class="cons-line right">—</td><td class="price">Fanatics (+180)</td><td class="model-pct right">39.3%</td><td class="mkt-pct right">20.0%</td><td class="edge right">+363</td><td class="fair-odds right">+194</td></tr>
<tr data-game="buffalo bills @ atlanta falcons" data-market="anytime_td" data-book="fanatics" data-player="khalil shakir"><td class="game">Buffalo Bills @ Atlanta Falcons</td><td class="player">Khalil Shakir</td><td class="market">player_anytime_td</td><td class="side">Yes</td><td class="model-line right">0.5</td><td class="book-line right">—</td><td class="cons-line right">—</td><td class="price">Fanatics (+165)</td><td class="model-pct right">39.3%</td><td class="mkt-pct right">34.5%</td><td class="edge right">+161</td><td class="fair-odds right">+178</td></tr>
<tr data-game="buffalo bills @ atlanta falcons" data-market="anytime_td" data-book="draftkings" data-player="josh allen"><td class="game">Buffalo Bills @ Atlanta Falcons</td><td class="player">Josh Allen</td><td class="market">player_anytime_td</td><td class="side">Yes</td><td class="model-line right">0.8</td><td class="book-line right">—</td><td class="cons-line right">—</td><td class="price">DraftKings (-105)</td><td class="model-pct right">52.8%</td><td class="mkt-pct right">55.6%</td><td class="edge right">+154</td><td class="fair-odds right">+105</td></tr></tbody></table>
</div>


<script>
document.addEventListener('DOMContentLoaded', function() {
  const gameSel = document.getElementById('filter-game');
  const marketSel = document.getElementById('filter-market');
  const booksMultiSel = document.getElementById('filter-books');
  const bookDropdown = document.getElementById('bookDropdown');
  const bookButton = document.getElementById('bookButton');
  const bookButtonText = document.getElementById('bookButtonText');
  const playerInput = document.getElementById('filter-player');
  const selectAllBtn = document.getElementById('select-all-books');
  const clearBooksBtn = document.getElementById('clear-books');
  const bookCountSpan = document.getElementById('book-count');

  if (!gameSel || !marketSel || !booksMultiSel || !playerInput) return;

  function updateBookButtonText() {
    const checkboxes = booksMultiSel.querySelectorAll('input[type="checkbox"]');
    const checked = booksMultiSel.querySelectorAll('input[type="checkbox"]:checked');
    const total = checkboxes.length;
    const count = checked.length;
    bookButtonText.textContent = count === total ? 'Book (All)' : count === 0 ? 'Book (None)' : `Book (${count})`;
  }

  const rows = Array.from(document.querySelectorAll('table.consensus-table tbody tr'));
  const bookEntries = new Map();
  const marketEntries = new Map();
  const gameEntries = new Set();

  function addBook(key, label) {
    if (!key) return;
    if (!bookEntries.has(key)) {
      bookEntries.set(key, label || key);
    }
  }

  rows.forEach(row => {
    const game = row.dataset.game || '';
    if (game) gameEntries.add(game);
    const marketKey = row.dataset.market || '';
    const marketLabel = row.dataset.marketLabel || marketKey;
    if (marketKey) marketEntries.set(marketKey, marketLabel);

    if (row.dataset.book) {
      addBook(row.dataset.book, row.dataset.bookLabel || row.dataset.book);
    }
  });

  function fillSelect(sel, entries) {
    const opts = Array.from(entries instanceof Map ? entries.entries() : Array.from(entries).map(v => [v,v]));
    opts.sort((a,b) => a[1].localeCompare(b[1]));
    opts.forEach(([key, label]) => {
      const opt = document.createElement('option');
      opt.value = key;
      opt.textContent = label;
      sel.appendChild(opt);
    });
  }

  fillSelect(gameSel, gameEntries);
  fillSelect(marketSel, marketEntries);

  // Populate book checkboxes
  const bookOpts = Array.from(bookEntries.entries()).sort((a,b) => a[1].localeCompare(b[1]));
  bookOpts.forEach(([key, label]) => {
    const div = document.createElement('div');
    div.className = 'checkbox-item';

    const checkbox = document.createElement('input');
    checkbox.type = 'checkbox';
    checkbox.id = `book-${key}`;
    checkbox.value = key;
    checkbox.checked = true;
    checkbox.addEventListener('change', () => {
      updateBookButtonText();
      applyFilters();
      updateBookCount();
    });

    const labelEl = document.createElement('label');
    labelEl.htmlFor = `book-${key}`;
    labelEl.textContent = label;

    div.appendChild(checkbox);
    div.appendChild(labelEl);
    booksMultiSel.appendChild(div);
  });

  updateBookButtonText();
  updateBookCount();

  // Dropdown toggle
  bookButton.addEventListener('click', e => {
    e.stopPropagation();
    bookDropdown.classList.toggle('open');
  });

  // Close dropdown when clicking outside
  document.addEventListener('click', e => {
    if (!bookDropdown.contains(e.target)) {
      bookDropdown.classList.remove('open');
    }
  });

  function getSelectedBooks() {
    const checkboxes = booksMultiSel.querySelectorAll('input[type="checkbox"]:checked');
    return Array.from(checkboxes).map(cb => cb.value.toLowerCase());
  }

  function updateBookCount() {
    const checkboxes = booksMultiSel.querySelectorAll('input[type="checkbox"]');
    const checked = booksMultiSel.querySelectorAll('input[type="checkbox"]:checked');
    const count = checked.length;
    const total = checkboxes.length;
    bookCountSpan.textContent = count === total ? 'All books selected' : `${count} of ${total} books selected`;
  }

  function applyFilters() {
    const gameVal = gameSel.value.toLowerCase();
    const marketVal = marketSel.value.toLowerCase();
    const selectedBooks = getSelectedBooks();
    const playerVal = playerInput.value.toLowerCase();

    let visible = 0;
    rows.forEach(row => {
      const game = (row.dataset.game || '').toLowerCase();
      const market = (row.dataset.market || '').toLowerCase();
      const player = (row.dataset.player || '').toLowerCase();
      const bookData = (row.dataset.book || '').toLowerCase();

      const gameMatch = !gameVal || game === gameVal;
      const marketMatch = !marketVal || market === marketVal;
      const playerMatch = !playerVal || player.includes(playerVal);
      const bookMatch = selectedBooks.length === 0 || selectedBooks.includes(bookData);

      if (gameMatch && marketMatch && playerMatch && bookMatch) {
        row.style.display = '';
        visible++;
      } else {
        row.style.display = 'none';
      }
    });
  }

  gameSel.addEventListener('change', applyFilters);
  marketSel.addEventListener('change', applyFilters);
  playerInput.addEventListener('input', applyFilters);

  selectAllBtn.addEventListener('click', () => {
    booksMultiSel.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = true);
    updateBookButtonText();
    updateBookCount();
    applyFilters();
  });

  clearBooksBtn.addEventListener('click', () => {
    booksMultiSel.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
    updateBookButtonText();
    updateBookCount();
    applyFilters();
  });
});
</script>


</body>
</html>