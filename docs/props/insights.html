<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Fourth &amp; Value — Insights (Week 12)</title>
  <style>
  :root { color-scheme: dark; }
  body {
    margin: 0;
    background: #0b0b0b;
    color: #e5e7eb;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Inter, Roboto, Helvetica, Arial, sans-serif;
  }
  .wrap { max-width: 980px; margin: 0 auto; padding: 16px; }
  h1, h2, h3 { color: #fff; }
  .muted { color: #94a3b8; }
  .filterbar { display:flex; align-items:center; gap:10px; flex-wrap:wrap; margin: 12px 0 10px; }
  .filterbar label { font-weight:600; }
  .filterbar select {
    background:#0f172a; color:#e5e7eb; border:1px solid #27324a;
    border-radius:10px; padding:8px 10px; min-width: 220px;
  }
  .share {
    display:flex; gap:8px; align-items:center; flex-wrap:wrap;
  }
  .share button, .share input {
    background:#0f172a; color:#e5e7eb; border:1px solid #27324a;
    border-radius:10px; padding:8px 10px;
  }
  .share input {
    min-width: 220px;
  }
  .share button {
    cursor:pointer;
  }
  .week {
    border: 1px solid #27324a; background:#0f172a; border-radius:12px;
    padding:12px; margin: 6px 0 12px;
  }
  .week ul { margin: 8px 0 0 18px; }
  .game { margin-top: 16px; }
  .game p { line-height: 1.55; color: #cbd5e1; }
  .game ul { margin: 10px 0 0 18px; }
  .game li { margin: 6px 0; }
  @media (max-width: 720px) {
    .wrap { padding: 12px; }
    .filterbar select { min-width: 180px; }
    .share input { min-width: 180px; }
  }

  /* Minimal nav styles (for injected nav.js) */
  .site-header{position:sticky;top:0;z-index:50;background:rgba(11,11,11,.85);
    backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);
    border-bottom:1px solid #27324a}
  .navbar{max-width:1100px;margin:0 auto;padding:10px 16px;display:flex;align-items:center;gap:12px}
  .nav-links{margin-left:auto;display:flex;flex-wrap:wrap;gap:8px}
  .nav-link{display:inline-flex;align-items:center;gap:6px;padding:8px 12px;border-radius:10px;text-decoration:none;color:#e5e7eb}
  .nav-link:hover{background:rgba(76,117,255,.14)}
  .nav-link.active{border:1px solid #4c74ff;background:rgba(76,117,255,.10)}
</style>
</head>
<body>
  <div id="nav-root"></div>

  <div class="wrap" data-week-overview="Week 12 features 10 games with several interesting edges. Top edge: Bryce Young pass_completions at 5130 bps. Check individual games for details.">
    <h1>Fourth &amp; Value — Insights (Week 12)</h1>
    <p class="muted">AI-powered insights from our model. Choose a matchup to view analysis.</p>

    <section class="game" data-key="new-york-jets-at-new-england-patriots">
  <h3>New York Jets @ New England Patriots</h3>
  <p>New York Jets @ New England Patriots: rush_attempts over pops most on our numbers. Shop for best price; keep stakes modest.</p>
</section>
<section class="game" data-key="washington-commanders-at-miami-dolphins">
  <h3>Washington Commanders @ Miami Dolphins</h3>
  <p>Washington Commanders @ Miami Dolphins: Receiving Yards under pops most on our numbers. Shop for best price; keep stakes modest.</p>
</section>
<section class="game" data-key="carolina-panthers-at-atlanta-falcons">
  <h3>Carolina Panthers @ Atlanta Falcons</h3>
  <p>Carolina Panthers @ Atlanta Falcons: pass_completions under pops most on our numbers. Shop for best price; keep stakes modest.</p>
</section>
<section class="game" data-key="chicago-bears-at-minnesota-vikings">
  <h3>Chicago Bears @ Minnesota Vikings</h3>
  <p>Chicago Bears @ Minnesota Vikings: Anytime TD yes pops most on our numbers. Shop for best price; keep stakes modest.</p>
</section>
<section class="game" data-key="cincinnati-bengals-at-pittsburgh-steelers">
  <h3>Cincinnati Bengals @ Pittsburgh Steelers</h3>
  <p>Cincinnati Bengals @ Pittsburgh Steelers: reception_longest under pops most on our numbers. Shop for best price; keep stakes modest.</p>
</section>
<section class="game" data-key="houston-texans-at-tennessee-titans">
  <h3>Houston Texans @ Tennessee Titans</h3>
  <p>Houston Texans @ Tennessee Titans: rush_longest over pops most on our numbers. Shop for best price; keep stakes modest.</p>
</section>
<section class="game" data-key="los-angeles-chargers-at-jacksonville-jaguars">
  <h3>Los Angeles Chargers @ Jacksonville Jaguars</h3>
  <p>Los Angeles Chargers @ Jacksonville Jaguars: rush_longest under pops most on our numbers. Shop for best price; keep stakes modest.</p>
</section>
<section class="game" data-key="san-francisco-49ers-at-arizona-cardinals">
  <h3>San Francisco 49ers @ Arizona Cardinals</h3>
  <p>San Francisco 49ers @ Arizona Cardinals: Anytime TD yes pops most on our numbers. Shop for best price; keep stakes modest.</p>
</section>
<section class="game" data-key="seattle-seahawks-at-los-angeles-rams">
  <h3>Seattle Seahawks @ Los Angeles Rams</h3>
  <p>Seattle Seahawks @ Los Angeles Rams: Receptions under pops most on our numbers. Shop for best price; keep stakes modest.</p>
</section>
<section class="game" data-key="kansas-city-chiefs-at-denver-broncos">
  <h3>Kansas City Chiefs @ Denver Broncos</h3>
  <p>Kansas City Chiefs @ Denver Broncos: Receptions under pops most on our numbers. Shop for best price; keep stakes modest.</p>
</section>
  </div>

  <script src="../nav.js?v=25"></script>
  <script>
document.addEventListener('DOMContentLoaded', () => {
  const main = document.querySelector('main') || document.body;
  if (!document.querySelector('.wrap')) {
    const wrap = document.createElement('div');
    wrap.className = 'wrap';
    while (main.firstChild) wrap.appendChild(main.firstChild);
    main.appendChild(wrap);
  }
  const wrap = document.querySelector('.wrap');

  // Filter bar: Game select + counts + share controls
  const bar = document.createElement('div');
  bar.className = 'filterbar';
  bar.innerHTML = `
    <label class="muted" for="gameSel">Game:</label>
    <select id="gameSel" aria-label="Select a game"><option value="__all__">All games</option></select>
    <span id="count" class="muted"></span>
    <span class="share" id="shareBox" style="display:none;">
      <button id="shareBtn" type="button" title="Share this game">Share</button>
      <input id="shareUrl" readonly value="">
      <button id="copyBtn" type="button" title="Copy link">Copy</button>
    </span>
  `;
  const h1 = wrap.querySelector('h1');
  wrap.insertBefore(bar, h1 ? h1.nextSibling : wrap.firstChild);

  // Week-at-a-glance paragraph (shown only for "All games")
  const weekBox = document.createElement('section');
  weekBox.className = 'week';
  weekBox.id = 'weekBox';
  weekBox.innerHTML = `
    <strong>Week at a glance</strong>
    <p class="muted" id="weekLine"></p>
  `;
  wrap.insertBefore(weekBox, bar.nextSibling);
  const weekLine = weekBox.querySelector('#weekLine');

  // Identify game blocks and populate dropdown
  const blocks = Array.from(wrap.querySelectorAll('.game[data-key]'));
  const sel = document.getElementById('gameSel');
  blocks.forEach(b => {
    const opt = document.createElement('option');
    opt.value = b.dataset.key;
    opt.textContent = (b.querySelector('h3')?.textContent || b.dataset.key).trim();
    sel.appendChild(opt);
  });

  // Precompute totals
  const totalGames = blocks.length;
  const totalPicks = blocks.reduce((acc, b) => acc + b.querySelectorAll('li').length, 0);

  // Counts + Share controls
  const countSpan = document.getElementById('count');
  const shareBox = document.getElementById('shareBox');
  const shareBtn = document.getElementById('shareBtn');
  const copyBtn  = document.getElementById('copyBtn');
  const shareUrl = document.getElementById('shareUrl');

  function updateShare(slug, title) {
    const url = new URL(location.href);
    if (!slug || slug === '__all__') {
      url.searchParams.delete('game');
      shareUrl.value = '';
      shareBox.style.display = 'none';
      return;
    }
    url.searchParams.set('game', slug);
    shareUrl.value = url.toString();
    shareBox.style.display = '';
    shareBtn.onclick = async () => {
      try {
        if (navigator.share) {
          await navigator.share({ title: title || document.title, url: shareUrl.value });
        } else {
          await navigator.clipboard.writeText(shareUrl.value);
          shareBtn.textContent = 'Copied!';
          setTimeout(() => shareBtn.textContent = 'Share', 1200);
        }
      } catch (_) {}
    };
    copyBtn.onclick = async () => {
      try {
        await navigator.clipboard.writeText(shareUrl.value);
        copyBtn.textContent = 'Copied!';
        setTimeout(() => copyBtn.textContent = 'Copy', 1200);
      } catch (_) {}
    };
  }

  function applyFilter() {
  const v = sel.value;

  if (v === '__all__') {
    blocks.forEach(b => { b.style.display = 'none'; });
    weekBox.style.display = '';
    const weekOverview = wrap.dataset.weekOverview || '';
    if (weekOverview) {
      weekLine.textContent = weekOverview;
    } else {
      weekLine.textContent = `${totalGames} games • ${totalPicks} total picks. Select a game to view its summary.`;
    }
    countSpan.textContent = `${totalGames} games`;
    updateShare(null, null);
    return;
  }

  let shownName = '', shownPicks = 0;
  blocks.forEach(b => {
    const show = (b.dataset.key === v);
    b.style.display = show ? '' : 'none';
    if (show) {
      shownName = (b.querySelector('h3')?.textContent || '').trim();
      shownPicks = b.querySelectorAll('li').length;
    }
  });
  weekBox.style.display = 'none';
  countSpan.textContent = shownPicks > 0 ? `${shownPicks} picks` : ''; // hide when zero
  updateShare(v, shownName);
}


  sel.addEventListener('change', applyFilter);

  // Deep-link support: ?game=slug
  const params = new URLSearchParams(location.search);
  const want = params.get('game');
  if (want && Array.from(sel.options).some(o => o.value === want)) sel.value = want;

  applyFilter();
});
</script>
</body>
</html>
